<section data-ng-controller="HistoriqueController">
  <article class="col-md-6">
    <h3 class='lato-font-title' > Historique :</h3> 
    <h4 ng-show='nbLivres > 0'> Livres </h4>
    <ul style="list-style-type:none; margin:0; padding:0;">
      <li class="user_list" ng-repeat="media in listeHistorique | orderBy : 'histo'">
        <div class='well' ng-if='media.typeMedia === "Livres"'>
          <div class='col-md-9'>
            <h3 style="margin-top:6px">{{media.auteur}}<small><br><a data-ng-href="#!/livres/{{media._id}}">{{media.title}}</a></small></h3>
            <div> Genre: {{media.dewey}} &nbsp Ref. {{media.ref}}</div>
            <div> Emprunté le {{media.histo.date_debut |date: 'dd/MM/yyyy'}} et rendu le {{media.histo.date_fin | date: 'dd/MM/yyyy'}}
            </div> 
            <p ng-show="media.histo.date_fin" ng-class='{"lato-font-retard": date_diff(media).retard}' ng-bind='date_diff(media).message'> </p>   
          </div> 
          <div data-ng-hide="!media.lien_image">
            <a data-ng-href="#!/livres/{{media._id}}">
              <img ng-src="{{media.lien_image}}" border="0" align="center" width=80 height=130>
            </a>
          </div>
          <div style='clear:both'> 
          </div>
        </div>
      </li>
    </ul>
    <h4 ng-show='nbMag > 0'> Magazines </h4>
    <ul style="list-style-type:none; margin:0; padding:0;">
      <li class="user_list" ng-repeat="media in listeHistorique">
        <div class='well' ng-if='media.typeMedia === "Magazines"'>
          <div class='col-md-9'>
            <h4><a data-ng-href="#!/livres/{{media._id}}">{{media.title}}</a></h4>
            <div> Numero: {{media.numero}} &nbsp Ref. {{media.ref}}</div>
            <div> Emprunté le {{media.histo.date_debut |date: 'dd/MM/yyyy'}} et rendu le {{media.histo.date_fin | date: 'dd/MM/yyyy'}}
            </div> 
            <p ng-show="media.histo.date_fin" ng-class='{"lato-font-retard": date_diff(media).retard}' ng-bind='date_diff(media).message'> </p>   
          </div> 
          <div data-ng-hide="!media.lien_image">
            <a data-ng-href="#!/livres/{{media._id}}">
              <img ng-src="{{media.lien_image}}" border="0" align="center" width=80 height=130>
            </a>
          </div>
        </div>
      </li>
    </ul>
    <h4 ng-show='nbBD > 0'> BD </h4>
    <ul style="list-style-type:none; margin:0; padding:0;">
      <li class="user_list" ng-repeat="media in listeHistorique">
        <div class='well' ng-if='media.typeMedia === "BD"'>
          <div class='col-md-9'>
            <h3 style='margin-top:0'>{{media.dessinateur}}<small><br><a data-ng-href="#!/bds/{{media._id}}">{{media.title}}</a></small></h3>
            <div> Genre: {{media.dewey}} &nbsp Ref. {{media.ref}}</div>
            <div> Emprunté le {{media.histo.date_debut |date: 'dd/MM/yyyy'}} et rendu le {{media.histo.date_fin | date: 'dd/MM/yyyy'}}
            </div> 
            <p ng-show="media.histo.date_fin" ng-class='{"lato-font-retard": date_diff(media).retard}' ng-bind='date_diff(media).message'> </p>   
          </div> 
          <div data-ng-hide="!media.lien_image">
            <a data-ng-href="#!/bds/{{media._id}}">
              <img ng-src="{{media.lien_image}}" border="0" align="center" width=80 height=130>
            </a>
          </div>
        </div>
      </li>
    </ul>
    <h4 ng-show='nbCD > 0'> CD </h4>
    <ul style="list-style-type:none; margin:0; padding:0;">
      <li class="user_list" ng-repeat="media in listeHistorique">
        <div class='well' ng-if='media.typeMedia === "CD"'>
          <div class='col-md-9'>
            <h3>{{media.auteur}}<small><br><a data-ng-href="#!/cds/{{media._id}}">{{media.title}}</a></small></h3>
            <div> Genre: {{media.dewey}} &nbsp Ref. {{media.ref}}</div>
            <div> Emprunté le {{media.histo.date_debut |date: 'dd/MM/yyyy'}} et rendu le {{media.histo.date_fin | date: 'dd/MM/yyyy'}}
            </div> 
            <p ng-show="media.histo.date_fin" ng-class='{"lato-font-retard": date_diff(media).retard}' ng-bind='date_diff(media).message'> </p>   
          </div> 
          <div data-ng-hide="!media.lien_image">
            <a data-ng-href="#!/cds/{{media._id}}">
              <img ng-src="{{media.lien_image}}" border="0" align="center" width=100 height=100>
            </a>
          </div>
        </div>
      </li>
    </ul>
    <h4 ng-show='nbDVD > 0'> DVD </h4>
    <ul style="list-style-type:none; margin:0; padding:0;">
      <li class="user_list" ng-repeat="media in listeHistorique">
        <div class='well' ng-if='media.typeMedia === "DVD"'>
          <div class='col-md-9'>
            <h3>{{media.realisateur}}<small><br><a data-ng-href="#!/livres/{{media._id}}">{{media.title}}</a></small></h3>
            <div> Genre: {{media.dewey}} &nbsp Ref. {{media.ref}}</div>
            <div> Emprunté le {{media.histo.date_debut |date: 'dd/MM/yyyy'}} et rendu le {{media.histo.date_fin | date: 'dd/MM/yyyy'}}
            </div> 
            <p ng-show="media.histo.date_fin" ng-class='{"lato-font-retard": date_diff(media).retard}' ng-bind='date_diff(media).message'> </p>   
          </div> 
          <div data-ng-hide="!media.lien_image">
            <a data-ng-href="#!/livres/{{media._id}}">
              <img ng-src="{{media.lien_image}}" border="0" align="center" width=80 height=130>
            </a>
          </div>
        </div>
      </li>
    </ul>
  </article>
</section>
